(function (arr) {
    arr.forEach(function (item) {
        if (item.hasOwnProperty('after')) {
            return;
        }
        Object.defineProperty(item, 'after', {
            configurable: true,
            enumerable: true,
            writable: true,
            value: function after() {
                var argArr = Array.prototype.slice.call(arguments),
                    docFrag = document.createDocumentFragment();

                argArr.forEach(function (argItem) {
                    var isNode = argItem instanceof Node;
                    docFrag.appendChild(isNode ? argItem : document.createTextNode(String(argItem)));
                });

                this.parentNode.insertBefore(docFrag, this.nextSibling);
            }
        });
    });
})([Element.prototype, CharacterData.prototype, DocumentType.prototype]);

//·µ»Ø¶¥²¿°´Å¥
var top_btn = document.querySelector("a.btn-go-top");
if (top_btn) {
    window.addEventListener('scroll', function () {
        if ((window.scrollY || document.documentElement.scrollTop || 0) > 500) {
            top_btn.style.display = "block";
        } else {
            top_btn.style.display = "none";
        }
    }, false);
    top_btn.addEventListener('click', function (e) {
        window.scrollTo({
            top: 0,
            left: 0,
            behavior: 'smooth'
        });
        return false;

    }, false);
}

(function () {
    if (window.outerWidth > 768)
        return;

    var navs = document.querySelectorAll(".js-menu-carousel");

    if (navs && navs.length > 0) {
        for (var i = 0; i < navs.length; i++) {
            var nav = navs[i];

            console.log(nav.scrollWidth);
            (function (nav) {
                var next = document.createElement("div");
                next.classList.add("js-nav-arrow-next");
                next.classList.add("hidden");

                var prev = document.createElement("div");
                prev.classList.add("js-nav-arrow-prev");
                prev.classList.add("hidden");

                nav.before(prev);
                nav.after(next);

                prev.addEventListener("click", function (e) {
                    nav.scrollLeft -= 200;
                }, false);

                next.addEventListener("click", function (e) {
                    nav.scrollLeft += 200;
                }, false);

                function scroll_nav_arrow(e) {
                    if (this.scrollWidth < this.clientWidth + 10) nav.removeEventListener("scroll");

                    if (this.scrollLeft > 10) {
                        prev.classList.remove("hidden");
                    }
                    else
                        prev.classList.add("hidden");


                    if (this.scrollWidth > this.scrollLeft + this.clientWidth + 10) {
                        next.classList.remove("hidden");
                    }
                    else
                        next.classList.add("hidden");
                }
                var nav_timer = 0;
                nav.addEventListener("scroll", function (e) {
                    clearTimeout(nav_timer);
                    var self = this
                    nav_timer = setTimeout(function () {
                        console.log(e)
                        scroll_nav_arrow.apply(self, [e]);
                    }, 200);
                }, false);

                setTimeout(function () {
                    nav.scrollLeft = 2;
                }, 100);

                var width = nav.scrollWidth;
                if (nav.className.indexOf("n09")) {
                    width += parseInt(window.outerWidth * 0.08);
                }
                if (width <= window.outerWidth) {
                    next.setAttribute('style', 'display:none !important')
                }
            })(nav);
        }
    }
})();

