<!DOCTYPE html>
<html>
<head>
	<title>Audio Waveform Visualization</title>
</head>
<body>
<audio id="audio" src="audio/Xenogenesis.mp3" controls></audio>
<canvas id="canvas"></canvas>
<script>
	const audioElement = document.getElementById('audio');
	const audioContext = new AudioContext();
	const audioSource = audioContext.createMediaElementSource(audioElement);
	const analyserNode = audioContext.createAnalyser();
	
	audioSource.connect(analyserNode);
	analyserNode.connect(audioContext.destination);
	
	const canvas = document.getElementById('canvas');
	const ctx = canvas.getContext('2d');
	
	const frequencyData = new Uint8Array(analyserNode.frequencyBinCount);
	
	function draw() {
		requestAnimationFrame(draw);
		
		analyserNode.getByteFrequencyData(frequencyData);
		
		ctx.clearRect(0, 0, canvas.width, canvas.height);
		
		// »æÖÆÆµÆ×Í¼
		for (let i = 0; i < frequencyData.length; i++) {
			const value = frequencyData[i];
			const percent = value / 255;
			const height = canvas.height * percent;
			const offset = canvas.height - height - 1;
			const barWidth = canvas.width / frequencyData.length;
			
			ctx.fillStyle = `rgb({value},{value}, ${value})`;
			ctx.fillRect(i * barWidth, offset, barWidth, height);
		}
	}
	
	draw();
</script>
</body>
</html>
